<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using the dfeshiny Deploy Template • dfeshiny</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Using the dfeshiny Deploy Template">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dfeshiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/implementing-cookies.html">Implementing cookies consent</a></li>
    <li><a class="dropdown-item" href="../articles/using-the-dfeshiny-deploy-template.html">Using the dfeshiny Deploy Template</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using the dfeshiny Deploy Template</h1>
            
      

      <div class="d-none name"><code>using-the-dfeshiny-deploy-template.Rmd</code></div>
    </div>

    
    
<p>When developing DFE Shiny dashboards, it’s common to want a
consistent, simple, and secure way to deploy applications to platforms
such as ShinyApps.io or the new DfE hosting platform. This article shows
how to use the dfeshiny reusable workflow template for GitHub Actions,
with parameters defined in a separate YAML file to minimize duplication
and speed up development.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Have a <code>deploy_parameters.yaml</code></strong>:
Store all your deployment parameters, including the app name and
deployment target.</p></li>
<li><p><strong>Minimal Local Workflow</strong>: Reference the
<em>remote</em> reusable workflow (stored in another repository) from
your local <code>.github/workflows/deploy.yaml</code>.</p></li>
<li><p><strong>Secrets Management</strong>: Ensure your repository has
the required secrets (e.g., <code>SHINYAPPS_TOKEN</code> and
<code>SHINYAPPS_SECRET</code>) set up under <em>Settings &gt; Secrets
and variables</em>.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="create-a-deploy_parameters-yaml">1. Create a <code>deploy_parameters.yaml</code><a class="anchor" aria-label="anchor" href="#create-a-deploy_parameters-yaml"></a>
</h2>
<p>At the root of your project, add a file called
<code>deploy_parameters.yaml</code>.<br>
Below is an example with optional parameters:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">dashboard_name</span><span class="kw">:</span><span class="at"> </span><span class="st">"my-cool-dashboard"</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">deploy_target</span><span class="kw">:</span><span class="at"> </span><span class="st">"shinyapps"</span></span></code></pre></div>
<ul>
<li><p><code>dashboard_name</code>: Your application’s name on ShinyApps
(or other hosting platform).</p></li>
<li><p><code>deploy_target</code>: Where you want to deploy (e.g.,
<code>"shinyapps"</code>).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="set-up-your-local-workflow">2. Set Up Your Local Workflow<a class="anchor" aria-label="anchor" href="#set-up-your-local-workflow"></a>
</h2>
<p>In your local <code>.github/workflows/</code> folder, create or edit
a file—commonly named <code>deploy.yaml</code>. This file defines
<strong>only</strong> the trigger conditions (which branches to watch)
and then calls the remote reusable workflow.</p>
<p>Here is a minimal example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy Dashboard</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> development</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">  </span><span class="fu">deploy</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">    </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> dfe-analytical-services/dfeshiny/.github/workflows/deploy-dashboard-template.yaml@main</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">    </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">      </span><span class="fu">parameter_file</span><span class="kw">:</span><span class="at"> deploy_parameters.yaml</span></span></code></pre></div>
<ul>
<li><p><code>on: push</code>… ensures this workflow runs whenever code
is pushed to <code>main</code> or <code>development</code>.</p></li>
<li><p><code>uses: dfe-analytical-services/dfeshiny-deploy-templates…</code>
points to the remote repo and file containing the actual deployment
steps.</p></li>
<li><p><code>with: parameter_file: deploy_parameters.yaml</code> tells
the remote workflow which file to parse for parameters.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="secrets-and-permissions">3. Secrets and Permissions<a class="anchor" aria-label="anchor" href="#secrets-and-permissions"></a>
</h2>
<p>Before your deployment can succeed, you need to set the relevant
secrets in your local repository. These secrets are <strong>not</strong>
shared automatically across repos, so you must create them in your
project’s <em>Settings &gt; Secrets and variables &gt; Actions</em>:</p>
<ul>
<li><p><strong>SHINYAPPS_TOKEN</strong></p></li>
<li><p><strong>SHINYAPPS_SECRET</strong></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="how-the-template-works">4. How the Template Works<a class="anchor" aria-label="anchor" href="#how-the-template-works"></a>
</h2>
<p>Once you commit your <code>deploy.yaml</code> and
<code>deploy_parameters.yaml</code>, the GitHub Actions runner will:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Check Out the Code</strong> – Pulls your repository code
and the <code>deploy_parameters.yaml</code>.</p></li>
<li>
<p><strong>Parse Parameters</strong> – Uses a tool like
<code>yq</code> to read <code>deploy_parameters.yaml</code>:</p>
<ul>
<li><p><code>dashboard_name</code></p></li>
<li><p><code>deploy_target</code></p></li>
</ul>
</li>
<li><p><strong>Restore R Dependencies</strong> – If your project uses
<code>renv</code>, it runs <code>renv::restore()</code> to ensure your
local library is consistent.</p></li>
<li>
<p><strong>Deploy</strong> – Calls the appropriate deployment method
based on <code>deploy_target</code>.</p>
<ul>
<li>For ShinyApps.io, it uses <code>rsconnect::deployApp()</code>.</li>
</ul>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Using a reusable GitHub Actions workflow template:</p>
<ul>
<li><p><strong>Reduces complexity</strong> of dashboards deployments -
you only maintain a minimal local config .</p></li>
<li><p><strong>Ensures</strong> <strong>consistent deployment</strong>
practices across your dashboards.</p></li>
<li><p>Makes it easy to <strong>update</strong> deployments across your
dashboards with minimal changes in each repository.</p></li>
</ul>
<p>If you have questions about credentials or advanced usage, contact
the Explore Education Statistics Platforms team at <a href="mailto:explore.statistics@education.gov.uk">explore.statistics@education.gov.uk</a>.</p>
<blockquote>
<p>Whilst following the instructions in this article will help you set
up the deployment of your dashboard, you will still need to seek
approval to publish from the Explore Education Statistics team and ask
for them to set up the secrets management on GitHub for your deployment
to go through.</p>
</blockquote>
<p>With these steps, you can quickly set up your dashboards to deploy on
push—whether that’s ShinyApps.io or a future DfE platform—while keeping
all your deployment logic in a single, centralized workflow
template.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich Bielby, Charlotte Foster, Cam Race.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
